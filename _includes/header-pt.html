<header class="row">
  <!-- Logo -->
  <img id="logo" height="100px" alt="datazoom"
       src="{{ site.baseurl }}/assets/img/logo_branco_horizontal.png"
       class="center-img">

  <style>
    /* Botão especial "english" */
    .menu-item-english {
      background-color: #336699;
      color: #ffffff !important;
      border-radius: 5px;
      padding: 8px 15px;
      font-weight: 500;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .menu-item-english:hover {
      background-color: #336699 !important;
      color: #ffffff !important;
    }

    /* Regras garantidas para NÃO-TOUCH (PC) */
    html.no-touch #bs-example-navbar-collapse-1 {
      display: block !important;
      height: auto !important;
      overflow: visible !important;
    }
    html.no-touch .navbar-toggle {
      display: none !important;
    }
  </style>

  <!-- Marca <html> com touch / no-touch o mais cedo possível -->
  <script>
    (function () {
      var isTouch =
        ('ontouchstart' in window) ||
        (navigator.maxTouchPoints > 0) ||
        (navigator.msMaxTouchPoints > 0);
      document.documentElement.classList.add(isTouch ? 'touch' : 'no-touch');
    })();
  </script>

  <!-- Lógica: remove hambúrguer e o colapso no PC -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      var isTouch = document.documentElement.classList.contains('touch');
      var collapse = document.getElementById('bs-example-navbar-collapse-1');
      var toggleBtn = document.querySelector('.navbar-toggle');

      if (!collapse) return;

      if (!isTouch) {
        /* PC / notebook: menu sempre aberto, sem hambúrguer */
        if (toggleBtn && toggleBtn.parentNode) {
          toggleBtn.parentNode.removeChild(toggleBtn);   // remove o botão
        }
        collapse.classList.remove('collapse');           // elimina comportamento colapsável
        collapse.classList.remove('in');
        collapse.style.removeProperty('display');        // deixa o CSS resolver
        collapse.style.removeProperty('height');
      } else {
        
        collapse.classList.add('collapse');
        if (toggleBtn) toggleBtn.style.removeProperty('display');
      }

      
      function norm(path) {
        if (!path) return '/';
        try { path = new URL(path, window.location.origin).pathname; } catch(_){}
        path = path.replace(/\/+$/, '/');
        if (!path.startsWith('/')) path = '/' + path;
        return path;
      }
      var current = norm(window.location.pathname);
      var candidates = [current, current + 'index.html'];
      document.querySelectorAll('a.menu-item').forEach(function (a) {
        a.classList.remove('active');
        var path = norm(a.getAttribute('href'));
        if (candidates.includes(path)) a.classList.add('active');
      });
    });
  </script>
</header>

<div class="row">
  <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="row navbar-header">
        
        <button type="button" class="navbar-toggle collapsed"
                data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/index.html" class="menu-item">início</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/dz_amazonia.html" class="menu-item">DZ Amazônia</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/dz_stata.html" class="menu-item">DZ Stata</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/dz_r.html" class="menu-item">DZ R</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/equipe.html" class="menu-item">equipe</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/citacao.html" class="menu-item">citação</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/contato.html" class="menu-item">contato</a></li>
        </ul>

        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="{{ site.baseurl }}/en{{ page.url | remove_first: '/pt' }}"
               class="menu-item menu-item-english">english</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</div>
