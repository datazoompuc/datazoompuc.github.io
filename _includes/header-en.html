<header class="row">
  <img id="logo" height="100px" alt="datazoom"
       src="{{ site.baseurl }}/assets/img/logo_branco_horizontal.png"
       class="center-img">

  <style>
    /* Botão especial "english" (este header é EN, então estilizo o switch p/ PT) */
    .menu-item-portugues {
      background-color: #336699;
      color: #ffffff !important;
      border-radius: 5px;
      padding: 8px 15px;
      font-weight: 500;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .menu-item-portugues:hover {
      background-color: #336699 !important;
      color: #ffffff !important;
    }

    /* Mantive a classe caso use em algum lugar */
    .menu-item-english {
      background-color: #3498db;
      color: #ffffff !important;
      border-radius: 5px;
      padding: 8px 15px;
      font-weight: 500;
      transition: background-color 0.3s ease, color 0.3s ease;
    }
    .menu-item-english:hover {
      background-color: #0055aa;
      color: #ffffff !important;
    }

    /* Força layout desktop quando houver mouse/hover (PC/notebook) */
    html.no-touch .navbar-toggle { display: none !important; }
    html.no-touch #bs-example-navbar-collapse-1 {
      display: block !important;
      height: auto !important;
      overflow: visible !important;
    }
  </style>

  <!-- Detecção robusta: prioriza mouse/hover sobre touch -->
  <script>
    (function () {
      var hasFinePointer = matchMedia('(any-pointer: fine)').matches || matchMedia('(pointer: fine)').matches;
      var hasHover = matchMedia('(any-hover: hover)').matches || matchMedia('(hover: hover)').matches;
      var hasTouchPts = (navigator.maxTouchPoints || navigator.msMaxTouchPoints || 0) > 0 || ('ontouchstart' in window);

      var isTouchOnly = !hasFinePointer && !hasHover && hasTouchPts;
      var root = document.documentElement;
      root.classList.toggle('no-touch', !isTouchOnly);
      root.classList.toggle('touch', isTouchOnly);

      addEventListener('resize', function () {
        var fine = matchMedia('(any-pointer: fine)').matches || matchMedia('(pointer: fine)').matches;
        var hov  = matchMedia('(any-hover: hover)').matches || matchMedia('(hover: hover)').matches;
        var touchOnly = !fine && !hov && ((navigator.maxTouchPoints||navigator.msMaxTouchPoints||0)>0 || ('ontouchstart' in window));
        root.classList.toggle('no-touch', !touchOnly);
        root.classList.toggle('touch', touchOnly);
      });
    })();
  </script>

  <!-- Marca item ativo de forma robusta -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      function norm(path) {
        if (!path) return '/';
        try { path = new URL(path, window.location.origin).pathname; } catch (_) {}
        path = path.replace(/\/+$/, '/');
        if (!path.startsWith('/')) path = '/' + path;
        return path;
      }
      var current = norm(window.location.pathname);
      var candidates = [current, current + 'index.html'];
      document.querySelectorAll('a.menu-item').forEach(function (a) {
        a.classList.remove('active');
        var path = norm(a.getAttribute('href'));
        if (candidates.includes(path)) a.classList.add('active');
      });
    });
  </script>
</header>

<div class="row">
  <nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
      <div class="row navbar-header">
        <!-- Em desktop (no-touch) o botão é oculto via CSS; em touch funciona normal -->
        <button type="button" class="navbar-toggle collapsed"
                data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>

      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        <ul class="nav navbar-nav">
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/index.html" class="menu-item">home</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/dz_amazonia.html" class="menu-item">DZ Amazônia</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/dz_stata.html" class="menu-item">DZ Stata</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/dz_r.html" class="menu-item">DZ R</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/equipe.html" class="menu-item">team</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/citacao.html" class="menu-item">cite us</a></li>
          <li><a href="{{ site.baseurl }}/{{ page.lang }}/contato.html" class="menu-item">contact</a></li>
        </ul>

        <!-- Alinha à direita no Bootstrap 3 -->
        <ul class="nav navbar-nav navbar-right">
          <li>
            <a href="{{ site.baseurl }}/pt{{ page.url | remove_first: '/en' }}"
               class="menu-item menu-item-portugues">
              português
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</div>
